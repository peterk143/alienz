#!/bin/bash

if [ -d ./debian ]; then
    ## commit and tag
    git add ../*
    echo ""
    head debian/changelog
    echo ""
    echo "gimme comments, br0"
    read comments
    echo ""
    echo "version number?"
    read version
    echo ""
    git commit -m "${comments}"
    git tag -a "${version}" -m "${comments}"
    echo ""
    
    ## are your tag and comments correct
    git status
    echo ""
    echo -n "push changes? [y/N] "
    read -n 1 response
    echo ""
    response=`echo $response |tr '[:upper:]' '[:lower:]'`

    if [ "${response}" == "y" ]; then
	git push origin HEAD
	git push --tags
    elif [ "${response}" == "" -o "${response}" == "n" ]; then
	echo "ain't doin' shit!"
    else
	echo "incorrect input, dude"
	exit 1
    fi
else
    echo "wrong directory, br0"
    exit 1
fi
